# War3 åˆ›å»ºæˆ¿é—´åç‚¹å‡»åˆ—è¡¨é€‰é¡¹å¼¹å‡ºæ‰¾ä¸åˆ°æ¸¸æˆçš„å¯¹è¯æ¡†è°ƒè¯•æ—¥å¿—
**Error Code: 0x07 (NETERROR_JOINGAMENOTFOUND)**

![x64dbgè°ƒè¯•æˆªå›¾](https://github.com/wuxiancong/War3Bot/raw/main/debug/images/War3Dialog_NETERROR_JOINGAMENOTFOUND_0x7.PNG)

## 1. ç°è±¡æè¿° (Symptom)
åœ¨ Hook æ‹¦æˆªåˆ°ç›®æ ‡æˆ¿é—´åå¹¶å°è¯•æ‰§è¡Œ `JoinGame` åï¼Œæ¸¸æˆå¼¹å‡º **"æ— æ³•æ‰¾åˆ°æ¸¸æˆ"** çš„é”™è¯¯æç¤ºçª—å£ã€‚

### UI å±‚é”™è¯¯åˆ¤æ–­é€»è¾‘
åœ¨å‡½æ•° `6F5B4D40` (JoinGame æµç¨‹) ä¸­ï¼Œç¨‹åºæ ¹æ®è¿”å›çš„é”™è¯¯ç å†³å®šå¼¹çª—ç±»å‹ã€‚

```assembly
; æ£€æŸ¥é”™è¯¯ç 
6F5B4D70  | 8B6F 14                 | mov ebp,dword ptr ds:[edi+14]    ; è¯»å–é”™è¯¯ç ï¼Œæ­¤æ—¶ EBP = 7
6F5B4D73  | 8D45 FF                 | lea eax,dword ptr ss:[ebp-1]     ; EAX = 6
6F5B4D76  | 83F8 2A                 | cmp eax,2A                       ; Switch åˆ†æ”¯åˆ¤æ–­
; ...
; é”™è¯¯ç å¯¼è‡´è·³è½¬åˆ° NETERROR_JOINGAMENOTFOUND
6F5B4EDE  | B9 6491966F             | mov ecx,game.6F969164            ; å­—ç¬¦ä¸²: "NETERROR_JOINGAMENOTFOUND"
6F5B4EE3  | EB 21                   | jmp game.6F5B4F06                ; æ‰§è¡Œå¼¹çª—
```

---

## 2. é”™è¯¯ç æº¯æº (Root Cause Trace)
é€šè¿‡åœ¨æ ˆæŒ‡é’ˆå’Œå†…å­˜ä¸‹ç¡¬ä»¶å†™å…¥æ–­ç‚¹ï¼Œè¿½è¸ªåˆ°é”™è¯¯ç  `7` çš„äº§ç”Ÿæºå¤´ã€‚

### é”™è¯¯ç å†™å…¥ç‚¹
é”™è¯¯ç æ¥æºäº `CNetEventGameFind` ç»“æ„çš„å¤„ç†è¿‡ç¨‹ã€‚

```assembly
; å‡½æ•°: game.6F652690
6F652697  | E8 9406E7FF             | call game.6F4C2D30               ; å†…éƒ¨å†™å…¥é€»è¾‘
...
; å†…å­˜æ•°æ® Dump (EngineNet->Recycle->Event->Data)
1B1E0DFC  6F6D1B1E  ..mo  
1B1E0E00  00000007  ....  <-- é”™è¯¯ç  7 è¢«å†™å…¥æ­¤å¤„
```

### å…³é”®è°ƒç”¨æ ˆ
é”™è¯¯ç æ˜¯ç”±åº•å±‚çš„çŠ¶æ€æ£€æŸ¥å‡½æ•°è¿”å›çš„ã€‚

```assembly
; è°ƒç”¨å±‚çº§
6F546806  | E8 85BE1000             | call game.6F652690  <-- å†™å…¥é”™è¯¯ç 
...
6F65B9C3  | E8 38D8FFFF             | call game.6F659200
...
6F660A6C  | FFD2                    | call edx            <-- åŠ¨æ€è°ƒç”¨è¿”å› 7
```

---

## 3. æ ¸å¿ƒåŸå› ï¼šçŠ¶æ€æœºå†²çª (State Machine Conflict)
è¿™æ˜¯å¯¼è‡´åŠ å…¥å¤±è´¥çš„æ ¹æœ¬åŸå› ã€‚åæ±‡ç¼–æ˜¾ç¤ºï¼Œæ¸¸æˆå¼•æ“åœ¨æ‰§è¡ŒåŠ å…¥é€»è¾‘å‰ï¼Œæ£€æŸ¥äº†å½“å‰çš„**ç½‘ç»œçŠ¶æ€**ã€‚

### çŠ¶æ€æ£€æŸ¥é€»è¾‘
ä½äºå‡½æ•° `6F660990` ä¸­ï¼š

```assembly
6F660A23  | E8 78790700             | call game.6F6D83A0             ; è·å–çŠ¶æ€ç›¸å…³å¯¹è±¡
6F660A28  | 83BE E8060000 05        | cmp dword ptr ds:[esi+6E8], 5  ; æ£€æŸ¥å½“å‰çŠ¶æ€æ˜¯å¦ä¸º 5
6F660A2F  | 75 42                   | jne game.6F660A73              ; å¦‚æœä¸æ˜¯ 5ï¼Œè·³è½¬åˆ°æ­£å¸¸é€»è¾‘
```

*   **`[esi+6E8]`**: ç½‘ç»œå¼•æ“å½“å‰çŠ¶æ€ (Network State)ã€‚
*   **çŠ¶æ€ `5`**: **GAME_STATE_LISTING** (æ­£åœ¨è¯·æ±‚/æ¥æ”¶/è§£ææ¸¸æˆåˆ—è¡¨)ã€‚
*   **é€»è¾‘è§£è¯»**:
    *   å¦‚æœå½“å‰çŠ¶æ€æ˜¯ **5** (æ­£åœ¨åˆ·åˆ—è¡¨)ï¼Œç¨‹åº**ä¸è·³è½¬**ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚
    *   å‘ä¸‹æ‰§è¡Œä¼šè§¦å‘ `call edx` (`6F660A6C`)ã€‚
    *   è¯¥ Call è¿”å›äº†é”™è¯¯ç  **7** (ä»¥åŠ `lea eax, [edi+7]`)ã€‚
    *   è¿™æ„å‘³ç€ï¼š**åœ¨åˆ—è¡¨åˆ·æ–°æœªå®Œæˆï¼ˆçŠ¶æ€=5ï¼‰æ—¶å¼ºè¡Œå°è¯• Joinï¼Œä¼šè¢«å¼•æ“æ‹’ç»ã€‚**

### é”™è¯¯åˆ†æ”¯ä»£ç 
è¿›å…¥çŠ¶æ€ 5 çš„å¤„ç†åˆ†æ”¯åï¼Œç›´æ¥ç”Ÿæˆé”™è¯¯ï¼š

```assembly
6F660A56  | 8D47 07                 | lea eax,dword ptr ds:[edi+7]   ; å‡†å¤‡é”™è¯¯ç  7
6F660A59  | 8B16                    | mov edx,dword ptr ds:[esi]
6F660A5B  | 8B92 9C000000           | mov edx,dword ptr ds:[edx+9C]
...
6F660A6C  | FFD2                    | call edx                       ; è§¦å‘é”™è¯¯å¤„ç†å›è°ƒ
```

---

## 3. å…¶å®ƒåŸå› ï¼šåˆ—è¡¨çŠ¶æ€æœªæ›´æ–° (ListBoxWar3 State Not Update)

æœ€ç»ˆå‘ç°ï¼šå³ä½¿ä»¥æ­£ç¡®çš„çŠ¶æ€åŠ å…¥æ¸¸æˆä¹Ÿä¼šå¼¹å‡ºæ— æ³•æ‰¾åˆ°æ¸¸æˆçš„çª—å£ï¼Œäºæ˜¯æˆ‘ç»§ç»­ä»åæ±‡ç¼–å»å¯»æ‰¾åŸå› ã€‚

*   **å›åˆ°åŠ å…¥æ¸¸æˆçš„åæ±‡ç¼–**


```assembly
6F5B4FB0  | 81EC A8020000           | sub esp,2A8                                |
6F5B4FB6  | A1 40E1AA6F             | mov eax,dword ptr ds:[6FAAE140]            |
6F5B4FBB  | 33C4                    | xor eax,esp                                |
6F5B4FBD  | 898424 A4020000         | mov dword ptr ss:[esp+2A4],eax             |
6F5B4FC4  | 56                      | push esi                                   |
6F5B4FC5  | 8BF1                    | mov esi,ecx                                |
6F5B4FC7  | E8 B40EFCFF             | call game.6F575E80                         |
6F5B4FCC  | 85C0                    | test eax,eax                               |
6F5B4FCE  | 0F84 D9010000           | je game.6F5B51AD                           |
6F5B4FD4  | 53                      | push ebx                                   |
6F5B4FD5  | E8 E664FFFF             | call game.6F5AB4C0                         |
6F5B4FDA  | 33DB                    | xor ebx,ebx                                |
6F5B4FDC  | 399C24 B4020000         | cmp dword ptr ss:[esp+2B4],ebx             |
6F5B4FE3  | 75 3B                   | jne game.6F5B5020                          |
6F5B4FE5  | 3998 90030000           | cmp dword ptr ds:[eax+390],ebx             |
6F5B4FEB  | 74 33                   | je game.6F5B5020                           |
6F5B4FED  | 68 00020000             | push 200                                   |
6F5B4FF2  | 8D9424 B0000000         | lea edx,dword ptr ss:[esp+B0]              |
6F5B4FF9  | B9 1C91966F             | mov ecx,game.6F96911C                      |
6F5B4FFE  | E8 4D460100             | call game.6F5C9650                         |
6F5B5003  | 6A 01                   | push 1                                     |
6F5B5005  | 6A 02                   | push 2                                     |
6F5B5007  | 6A 01                   | push 1                                     |
6F5B5009  | 56                      | push esi                                   |
6F5B500A  | 6A 0D                   | push D                                     |
6F5B500C  | 8D9424 C0000000         | lea edx,dword ptr ss:[esp+C0]              |
6F5B5013  | 8D4B 02                 | lea ecx,dword ptr ds:[ebx+2]               |
6F5B5016  | E8 957EFAFF             | call game.6F55CEB0                         |
6F5B501B  | E9 8C010000             | jmp game.6F5B51AC                          |
6F5B5020  | 8B8E 08020000           | mov ecx,dword ptr ds:[esi+208]             |
6F5B5026  | 885C24 08               | mov byte ptr ss:[esp+8],bl                 |
6F5B502A  | 885C24 28               | mov byte ptr ss:[esp+28],bl                |
6F5B502E  | 885C24 5C               | mov byte ptr ss:[esp+5C],bl                |
6F5B5032  | 889C24 92000000         | mov byte ptr ss:[esp+92],bl                |
6F5B5039  | 8B01                    | mov eax,dword ptr ds:[ecx]                 |
6F5B503B  | 8B90 48010000           | mov edx,dword ptr ds:[eax+148]             |
6F5B5041  | 55                      | push ebp                                   |
6F5B5042  | 33ED                    | xor ebp,ebp                                |
6F5B5044  | FFD2                    | call edx                                   |
6F5B5046  | 85C0                    | test eax,eax                               | <--- å…³é”®å¼‚å¸¸ç‚¹ï¼šå¼‚å¸¸æƒ…å†µè¿”å› 0xFFFFFFFFï¼Œæ­£å¸¸æƒ…å†µè¿”å›å¤§äº -1ï¼Œè¯´æ˜æ˜¯æˆ¿é—´åœ¨åˆ—è¡¨ä¸­çš„åºå·
6F5B5048  | 0F8C 10010000           | jl game.6F5B515E                           |
6F5B504E  | 8B8E 08020000           | mov ecx,dword ptr ds:[esi+208]             |
6F5B5054  | E8 A78CFAFF             | call game.6F55DD00                         |
6F5B5059  | 3BC3                    | cmp eax,ebx                                |
6F5B505B  | 0F84 FD000000           | je game.6F5B515E                           |
6F5B5061  | 8B68 08                 | mov ebp,dword ptr ds:[eax+8]               |
6F5B5064  | 3BEB                    | cmp ebp,ebx                                |
6F5B5066  | 0F84 F2000000           | je game.6F5B515E                           |
6F5B506C  | 8D50 0C                 | lea edx,dword ptr ds:[eax+C]               |
6F5B506F  | 8D4C24 0C               | lea ecx,dword ptr ss:[esp+C]               |
6F5B5073  | E8 98960000             | call game.6F5BE710                         |
6F5B5078  | F78424 AC000000 0002000 | test dword ptr ss:[esp+AC],200             |
6F5B5083  | 0F84 D5000000           | je game.6F5B515E                           |
6F5B5089  | 8D4C24 60               | lea ecx,dword ptr ss:[esp+60]              |
6F5B508D  | E8 4ED40000             | call game.6F5C24E0                         |
6F5B5092  | 85C0                    | test eax,eax                               |
6F5B5094  | 75 5D                   | jne game.6F5B50F3                          |
6F5B5096  | 68 00020000             | push 200                                   |
6F5B509B  | 8D9424 B4000000         | lea edx,dword ptr ss:[esp+B4]              |
6F5B50A2  | B9 5861966F             | mov ecx,game.6F966158                      |
6F5B50A7  | E8 A4450100             | call game.6F5C9650                         |
6F5B50AC  | 8B86 04020000           | mov eax,dword ptr ds:[esi+204]             |
6F5B50B2  | 6A 01                   | push 1                                     |
6F5B50B4  | 6A 04                   | push 4                                     |
6F5B50B6  | 53                      | push ebx                                   |
6F5B50B7  | 56                      | push esi                                   |
6F5B50B8  | 6A 09                   | push 9                                     |
6F5B50BA  | 8D9424 C4000000         | lea edx,dword ptr ss:[esp+C4]              |
6F5B50C1  | B9 01000000             | mov ecx,1                                  |
6F5B50C6  | 8986 FC010000           | mov dword ptr ds:[esi+1FC],eax             |
6F5B50CC  | E8 DF7DFAFF             | call game.6F55CEB0                         |
6F5B50D1  | 8BCE                    | mov ecx,esi                                |
6F5B50D3  | E8 9811FDFF             | call game.6F586270                         |
6F5B50D8  | 8B8E 08020000           | mov ecx,dword ptr ds:[esi+208]             |
6F5B50DE  | 8B11                    | mov edx,dword ptr ds:[ecx]                 |
6F5B50E0  | 8B82 54010000           | mov eax,dword ptr ds:[edx+154]             |
6F5B50E6  | FFD0                    | call eax                                   |
6F5B50E8  | 899E 70010000           | mov dword ptr ds:[esi+170],ebx             |
6F5B50EE  | E9 B8000000             | jmp game.6F5B51AB                          |
6F5B50F3  | E8 B8800000             | call game.6F5BD1B0                         |
6F5B50F8  | 8B4C24 48               | mov ecx,dword ptr ss:[esp+48]              |
6F5B50FC  | 3B88 30040000           | cmp ecx,dword ptr ds:[eax+430]             |
6F5B5102  | 74 5A                   | je game.6F5B515E                           |
6F5B5104  | E8 B7800000             | call game.6F5BD1C0                         |
6F5B5109  | 68 00020000             | push 200                                   |
6F5B510E  | 8D9424 B4000000         | lea edx,dword ptr ss:[esp+B4]              |
6F5B5115  | B9 3C61966F             | mov ecx,game.6F96613C                      |
6F5B511A  | E8 31450100             | call game.6F5C9650                         |
6F5B511F  | 8B96 04020000           | mov edx,dword ptr ds:[esi+204]             |
6F5B5125  | 6A 01                   | push 1                                     |
6F5B5127  | 8996 FC010000           | mov dword ptr ds:[esi+1FC],edx             |
6F5B512D  | 56                      | push esi                                   |
6F5B512E  | BA 09000000             | mov edx,9                                  |
6F5B5133  | 8D8C24 B8000000         | lea ecx,dword ptr ss:[esp+B8]              |
6F5B513A  | E8 F12BD8FF             | call game.6F337D30                         |
6F5B513F  | 8BCE                    | mov ecx,esi                                |
6F5B5141  | E8 2A11FDFF             | call game.6F586270                         |
6F5B5146  | 8B8E 08020000           | mov ecx,dword ptr ds:[esi+208]             |
6F5B514C  | 8B01                    | mov eax,dword ptr ds:[ecx]                 |
6F5B514E  | 8B90 54010000           | mov edx,dword ptr ds:[eax+154]             |
6F5B5154  | FFD2                    | call edx                                   |
6F5B5156  | 899E 70010000           | mov dword ptr ds:[esi+170],ebx             |
6F5B515C  | EB 4D                   | jmp game.6F5B51AB                          |
6F5B515E  | 57                      | push edi                                   |
6F5B515F  | 8DBE 74010000           | lea edi,dword ptr ds:[esi+174]             |
6F5B5165  | 8BCF                    | mov ecx,edi                                |
6F5B5167  | E8 94240600             | call game.6F617600                         |
6F5B516C  | 53                      | push ebx                                   |
6F5B516D  | 8BCF                    | mov ecx,edi                                |
6F5B516F  | E8 FC230600             | call game.6F617570                         |
6F5B5174  | 3BEB                    | cmp ebp,ebx                                |
6F5B5176  | C786 70010000 01000000  | mov dword ptr ds:[esi+170],1               |
6F5B5180  | 5F                      | pop edi                                    |
6F5B5181  | 74 10                   | je game.6F5B5193                           |
6F5B5183  | 53                      | push ebx                                   |
6F5B5184  | 68 9C52876F             | push game.6F87529C                         |
6F5B5189  | 55                      | push ebp                                   |
6F5B518A  | 8BCE                    | mov ecx,esi                                |
6F5B518C  | E8 5FFBFFFF             | call game.6F5B4CF0                         |
6F5B5191  | EB 18                   | jmp game.6F5B51AB                          |
6F5B5193  | 8B8E 04020000           | mov ecx,dword ptr ds:[esi+204]             |
6F5B5199  | 68 9C52876F             | push game.6F87529C                         |
6F5B519E  | E8 FDEC0500             | call game.6F613EA0                         |
6F5B51A3  | 50                      | push eax                                   |
6F5B51A4  | 8BCE                    | mov ecx,esi                                |
6F5B51A6  | E8 8509FCFF             | call game.6F575B30                         |
6F5B51AB  | 5D                      | pop ebp                                    |
6F5B51AC  | 5B                      | pop ebx                                    |
6F5B51AD  | 8B8C24 A8020000         | mov ecx,dword ptr ss:[esp+2A8]             |
6F5B51B4  | 5E                      | pop esi                                    |
6F5B51B5  | 33CC                    | xor ecx,esp                                |
6F5B51B7  | B8 01000000             | mov eax,1                                  |
6F5B51BC  | E8 98BE2200             | call game.6F7E1059                         |
6F5B51C1  | 81C4 A8020000           | add esp,2A8                                |
6F5B51C7  | C2 0400                 | ret 4                                      |
```
### å…³é”®å‡½æ•°
*	** åœ°å€ï¼š`6F56C8F0`
*	** åç§»ï¼š`game.dll + 56C8F0`
*	** æŠ€å·§ï¼šé€šè¿‡å¯¹æ¯”æ­£å¸¸æƒ…å†µå’Œå¼‚å¸¸æƒ…å†µåœ¨ [esi+1FC] [esi+1F4] [esi+1F8] [esi+1EC] [esi+1E4] çš„åŒºåˆ«

```assembly
6F56C8F0  | 56                      | push esi                                   |
6F56C8F1  | 8BF1                    | mov esi,ecx                                |
6F56C8F3  | 83BE FC010000 00        | cmp dword ptr ds:[esi+1FC],0               |
6F56C8FA  | 74 6B                   | je game.6F56C967                           |
6F56C8FC  | 83BE F4010000 00        | cmp dword ptr ds:[esi+1F4],0               |
6F56C903  | C786 F8010000 FFFFFFFF  | mov dword ptr ds:[esi+1F8],FFFFFFFF        |
6F56C90D  | 74 4E                   | je game.6F56C95D                           |
6F56C90F  | 8B86 EC010000           | mov eax,dword ptr ds:[esi+1EC]             |
6F56C915  | 33C9                    | xor ecx,ecx                                |
6F56C917  | 57                      | push edi                                   |
6F56C918  | 33FF                    | xor edi,edi                                |
6F56C91A  | 85C0                    | test eax,eax                               |
6F56C91C  | 0F9EC1                  | setle cl                                   |
6F56C91F  | 83E9 01                 | sub ecx,1                                  |
6F56C922  | 23C1                    | and eax,ecx                                |
6F56C924  | 85C0                    | test eax,eax                               |
6F56C926  | 7E 34                   | jle game.6F56C95C                          |
6F56C928  | 3986 F4010000           | cmp dword ptr ds:[esi+1F4],eax             |
6F56C92E  | 74 26                   | je game.6F56C956                           |
6F56C930  | 50                      | push eax                                   |
6F56C931  | 8D8E E4010000           | lea ecx,dword ptr ds:[esi+1E4]             |
6F56C937  | 83C7 01                 | add edi,1                                  |
6F56C93A  | E8 F1FBDEFF             | call game.6F35C530                         |
6F56C93F  | 85C0                    | test eax,eax                               |
6F56C941  | 7F E5                   | jg game.6F56C928                           |
6F56C943  | 8B86 F8010000           | mov eax,dword ptr ds:[esi+1F8]             |
6F56C949  | 5F                      | pop edi                                    |
6F56C94A  | C786 FC010000 00000000  | mov dword ptr ds:[esi+1FC],0               |
6F56C954  | 5E                      | pop esi                                    |
6F56C955  | C3                      | ret                                        |
6F56C956  | 89BE F8010000           | mov dword ptr ds:[esi+1F8],edi             |
6F56C95C  | 5F                      | pop edi                                    |
6F56C95D  | C786 FC010000 00000000  | mov dword ptr ds:[esi+1FC],0               |
6F56C967  | 8B86 F8010000           | mov eax,dword ptr ds:[esi+1F8]             |
6F56C96D  | 5E                      | pop esi                                    |
6F56C96E  | C3                      | ret                                        |
```

### å¼‚å¸¸æ•°æ® VS æ­£å¸¸æ•°æ®

**åˆ†ææ‘˜è¦ï¼š**
*   **ListBoxWar3Node**ï¼šç¬¬293è¡Œ `00000000` VS `19C100A8`
*   **			Index**ï¼šç¬¬294è¡Œ `FFFFFFFF` VS `00000001`ã€‚

### æ•°æ®å·®å¼‚å¯¹æ¯”è¡¨

| è¡Œå· | æ•°æ®ç»„ 1 (å·¦ä¾§) | æ•°æ®ç»„ 2 (å³ä¾§) | çŠ¶æ€ |
| :--- | :--- | :--- | :--- |
| 1 | 000000AE | 000000AE | |
| 2 | 645C3A65 | 645C3A65 | |
| 3 | 65766972 | 65766972 | |
| 4 | 65745C31 | 65745C31 | |
| 5 | 625C706D | 625C706D | |
| 6 | 646C6975 | 646C6975 | |
| 7 | 33726177 | 33726177 | |
| 8 | 61775C78 | 61775C78 | |
| 9 | 735C3372 | 735C3372 | |
| 10 | 6372756F | 6372756F | |
| 11 | 6C675C65 | 6C675C65 | |
| 12 | 435C6575 | 435C6575 | |
| 13 | 7473694C | 7473694C | |
| 14 | 57786F42 | 57786F42 | |
| 15 | 2E337261 | 2E337261 | |
| 16 | 00000068 | 00000068 | |
| 17 | 00000000 | 00000000 | |
| 18 | 00000000 | 00000000 | |
| 19 | 00040248 | 00040248 | |
| 20 | **6F6D18B3** | **6F6D18B8** | ğŸ”´ å·®å¼‚ |
| 21 | 6F95CCFC | 6F95CCFC | |
| 22 | 00000007 | 00000007 | |
| 23 | **14F6089C** | **14F600CC** | ğŸ”´ å·®å¼‚ |
| 24 | 00000000 | 00000000 | |
| 25 | 00000000 | 00000000 | |
| 26 | 00000000 | 00000000 | |
| 27 | **16064FB8** | **160602F8** | ğŸ”´ å·®å¼‚ |
| 28 | **16065AE4** | **16061264** | ğŸ”´ å·®å¼‚ |
| 29 | 095E07B8 | 095E07B8 | |
| 30 | 00000000 | 00000000 | |
| 31 | 00000000 | 00000000 | |
| 32 | 00000000 | 00000000 | |
| 33 | 00000000 | 00000000 | |
| 34 | 00000000 | 00000000 | |
| 35 | 00000000 | 00000000 | |
| 36 | **16A50AA4** | **16900AA4** | ğŸ”´ å·®å¼‚ |
| 37 | **16D900EC** | **16DA00EC** | ğŸ”´ å·®å¼‚ |
| 38 | **18B300B8** | **18B800B8** | ğŸ”´ å·®å¼‚ |
| 39 | 00000008 | 00000008 | |
| 40 | 00000000 | 00000000 | |
| 41 | 00000000 | 00000000 | |
| 42 | 00000000 | 00000000 | |
| 43 | 00000000 | 00000000 | |
| 44 | 00000000 | 00000000 | |
| 45 | 00000000 | 00000000 | |
| 46 | 00000000 | 00000000 | |
| 47 | 00000000 | 00000000 | |
| 48 | **18B300B8** | **18B800B8** | ğŸ”´ å·®å¼‚ |
| 49 | 00000000 | 00000000 | |
| 50 | 00000000 | 00000000 | |
| 51 | 00000000 | 00000000 | |
| 52 | **18B30130** | **18B80130** | ğŸ”´ å·®å¼‚ |
| 53 | **E74CFECF** | **E747FECF** | ğŸ”´ å·®å¼‚ |
| 54 | 6F96D9D8 | 6F96D9D8 | |
| 55 | 0000000C | 0000000C | |
| 56 | **18B30140** | **18B80140** | ğŸ”´ å·®å¼‚ |
| 57 | **E74CFEBF** | **E747FEBF** | ğŸ”´ å·®å¼‚ |
| 58 | 00000000 | 00000000 | |
| 59 | 00000000 | 00000000 | |
| 60 | 00000000 | 00000000 | |
| 61 | 00000000 | 00000000 | |
| 62 | 00000000 | 00000000 | |
| 63 | FFFFFFFF | FFFFFFFF | |
| 64 | 00000000 | 00000000 | |
| 65 | 00000000 | 00000000 | |
| 66 | 0000002E | 0000002E | |
| 67 | 6F95CCD4 | 6F95CCD4 | |
| 68 | 00000009 | 00000009 | |
| 69 | **16170B34** | **16171300** | ğŸ”´ å·®å¼‚ |
| 70 | 00000000 | 00000000 | |
| 71 | 00000000 | 00000000 | |
| 72 | 00000000 | 00000000 | |
| 73 | 00000000 | 00000000 | |
| 74 | 00000000 | 00000000 | |
| 75 | 00000000 | 00000000 | |
| 76 | 00000000 | 00000000 | |
| 77 | **16173E74** | **16172808** | ğŸ”´ å·®å¼‚ |
| 78 | 00000000 | 00000000 | |
| 79 | 00000000 | 00000000 | |
| 80 | 00000000 | 00000000 | |
| 81 | 00000000 | 00000000 | |
| 82 | **16181478** | **16180A64** | ğŸ”´ å·®å¼‚ |
| 83 | **16180BF0** | **16180948** | ğŸ”´ å·®å¼‚ |
| 84 | 3E39B962 | 3E39B962 | |
| 85 | 3CC08312 | 3CC08312 | |
| 86 | 3EC9A97F | 3EC9A97F | |
| 87 | 3EEDA1CB | 3EEDA1CB | |
| 88 | 00000001 | 00000001 | |
| 89 | 00000000 | 00000000 | |
| 90 | 00000000 | 00000000 | |
| 91 | 3F800000 | 3F800000 | |
| 92 | 00000000 | 00000000 | |
| 93 | 00000000 | 00000000 | |
| 94 | 00000000 | 00000000 | |
| 95 | 00000002 | 00000002 | |
| 96 | 00000000 | 00000000 | |
| 97 | 00000000 | 00000000 | |
| 98 | 00000000 | 00000000 | |
| 99 | 00000000 | 00000000 | |
| 100 | 00000000 | 00000000 | |
| 101 | 00000000 | 00000000 | |
| 102 | 00000000 | 00000000 | |
| 103 | 00000000 | 00000000 | |
| 104 | **18B30200** | **18B80200** | ğŸ”´ å·®å¼‚ |
| 105 | **E74CFDFF** | **E747FDFF** | ğŸ”´ å·®å¼‚ |
| 106 | 00000000 | 00000000 | |
| 107 | **18B3020C** | **18B8020C** | ğŸ”´ å·®å¼‚ |
| 108 | **E74CFDF3** | **E747FDF3** | ğŸ”´ å·®å¼‚ |
| 109 | 00000000 | 00000000 | |
| 110 | 16231720 | 16231720 | |
| 111 | 0000029A | 0000029A | |
| 112 | 00000000 | 00000000 | |
| 113 | 00000000 | 00000000 | |
| 114 | 00000000 | 00000000 | |
| 115 | 00000000 | 00000000 | |
| 116 | 00000000 | 00000000 | |
| 117 | 00000000 | 00000000 | |
| 118 | 00000000 | 00000000 | |
| 119 | 00000000 | 00000000 | |
| 120 | 00000000 | 00000000 | |
| 121 | 00000000 | 00000000 | |
| 122 | 00000040 | 00000040 | |
| 123 | 00000000 | 00000000 | |
| 124 | 00000000 | 00000000 | |
| 125 | 3F800000 | 3F800000 | |
| 126 | 00000000 | 00000000 | |
| 127 | 00000000 | 00000000 | |
| 128 | 3F000000 | 3F000000 | |
| 129 | 00000001 | 00000001 | |
| 130 | 00000000 | 00000000 | |
| 131 | 00000000 | 00000000 | |
| 132 | **166E6590** | **16246590** | ğŸ”´ å·®å¼‚ |
| 133 | **166E6590** | **16246590** | ğŸ”´ å·®å¼‚ |
| 134 | 00000000 | 00000000 | |
| 135 | 00000000 | 00000000 | |
| 136 | 00000000 | 00000000 | |
| 137 | 00000020 | 00000020 | |
| 138 | 00000000 | 00000000 | |
| 139 | 00000001 | 00000001 | |
| 140 | 00000000 | 00000000 | |
| 141 | 00000000 | 00000000 | |
| 142 | 00000001 | 00000001 | |
| 143 | 00000000 | 00000000 | |
| 144 | **18B302A0** | **18B802A0** | ğŸ”´ å·®å¼‚ |
| 145 | **E74CFD5F** | **E747FD5F** | ğŸ”´ å·®å¼‚ |
| 146 | 00000000 | 00000000 | |
| 147 | 00000000 | 00000000 | |
| 148 | FFFFFFFF | FFFFFFFF | |
| 149 | 00000000 | 00000000 | |
| 150 | 3C570A3D | 3C570A3D | |
| 151 | 3C570A3D | 3C570A3D | |
| 152 | 3C570A3D | 3C570A3D | |
| 153 | 3C570A3D | 3C570A3D | |
| 154 | 00000001 | 00000001 | |
| 155 | 00000001 | 00000001 | |
| 156 | 00000000 | 00000000 | |
| 157 | 00000000 | 00000000 | |
| 158 | 00000000 | 00000000 | |
| 159 | 00000000 | 00000000 | |
| 160 | 00000000 | 00000000 | |
| 161 | 00000000 | 00000000 | |
| 162 | 3CA3D70A | 3CA3D70A | |
| 163 | 00000000 | 00000000 | |
| 164 | **18A806D0** | **18AC06D0** | ğŸ”´ å·®å¼‚ |
| 165 | 00000000 | 00000000 | |
| 166 | 00040248 | 00040248 | |
| 167 | **6F6D18B3** | **6F6D18B8** | ğŸ”´ å·®å¼‚ |
| 168 | 6F95CCFC | 6F95CCFC | |
| 169 | **0000003A** | **0000003B** | ğŸ”´ å·®å¼‚ |
| 170 | **14F60A2C** | **14F6019C** | ğŸ”´ å·®å¼‚ |
| 171 | 00000000 | 00000000 | |
| 172 | 00000000 | 00000000 | |
| 173 | 00000000 | 00000000 | |
| 174 | **16061A88** | **16063BA8** | ğŸ”´ å·®å¼‚ |
| 175 | **16063CE4** | **16062504** | ğŸ”´ å·®å¼‚ |
| 176 | **19C000C0** | **096100C0** | ğŸ”´ å·®å¼‚ |
| 177 | 00000000 | 00000000 | |
| 178 | 00000000 | 00000000 | |
| 179 | 00000000 | 00000000 | |
| 180 | 00000000 | 00000000 | |
| 181 | 00000000 | 00000000 | |
| 182 | 00000000 | 00000000 | |
| 183 | **160F37CC** | **096337CC** | ğŸ”´ å·®å¼‚ |
| 184 | **16D90D6C** | **16DA0D6C** | ğŸ”´ å·®å¼‚ |
| 185 | **18B30300** | **18B80300** | ğŸ”´ å·®å¼‚ |
| 186 | 00000005 | 00000005 | |
| 187 | 00000000 | 00000000 | |
| 188 | 00000000 | 00000000 | |
| 189 | 00000000 | 00000000 | |
| 190 | 00000000 | 00000000 | |
| 191 | 00000000 | 00000000 | |
| 192 | 00000000 | 00000000 | |
| 193 | 00000000 | 00000000 | |
| 194 | **18B30300** | **18B80300** | ğŸ”´ å·®å¼‚ |
| 195 | 00000000 | 00000000 | |
| 196 | 00000000 | 00000000 | |
| 197 | 00000000 | 00000000 | |
| 198 | **18B30378** | **18B80378** | ğŸ”´ å·®å¼‚ |
| 199 | **E74CFC87** | **E747FC87** | ğŸ”´ å·®å¼‚ |
| 200 | 6F96D9D8 | 6F96D9D8 | |
| 201 | 0000000C | 0000000C | |
| 202 | **18B30388** | **18B80388** | ğŸ”´ å·®å¼‚ |
| 203 | **E74CFC77** | **E747FC77** | ğŸ”´ å·®å¼‚ |
| 204 | 00000000 | 00000000 | |
| 205 | 00000000 | 00000000 | |
| 206 | 00000000 | 00000000 | |
| 207 | 00000000 | 00000000 | |
| 208 | 00000000 | 00000000 | |
| 209 | FFFFFFFF | FFFFFFFF | |
| 210 | 00000000 | 00000000 | |
| 211 | 000000FF | 000000FF | |
| 212 | 0000002C | 0000002C | |
| 213 | 6F95CCD4 | 6F95CCD4 | |
| 214 | 00000009 | 00000009 | |
| 215 | **16171BA4** | **16171DE8** | ğŸ”´ å·®å¼‚ |
| 216 | 00000000 | 00000000 | |
| 217 | 00000000 | 00000000 | |
| 218 | 00000000 | 00000000 | |
| 219 | 00000000 | 00000000 | |
| 220 | 00000000 | 00000000 | |
| 221 | 00000000 | 00000000 | |
| 222 | 00000000 | 00000000 | |
| 223 | **1617217C** | **16171DAC** | ğŸ”´ å·®å¼‚ |
| 224 | 00000000 | 00000000 | |
| 225 | 00000000 | 00000000 | |
| 226 | 00000000 | 00000000 | |
| 227 | 00000000 | 00000000 | |
| 228 | **16181450** | **16181564** | ğŸ”´ å·®å¼‚ |
| 229 | **16183050** | **16181DBC** | ğŸ”´ å·®å¼‚ |
| 230 | 3E678C54 | 3E678C54 | |
| 231 | 3CD70A3D | 3CD70A3D | |
| 232 | 3F036C4D | 3F036C4D | |
| 233 | 3ECD70A4 | 3ECD70A4 | |
| 234 | 00000001 | 00000001 | |
| 235 | 00000000 | 00000000 | |
| 236 | 00000000 | 00000000 | |
| 237 | 3F800000 | 3F800000 | |
| 238 | 00000000 | 00000000 | |
| 239 | 00000000 | 00000000 | |
| 240 | 00000000 | 00000000 | |
| 241 | 00000002 | 00000002 | |
| 242 | 00000000 | 00000000 | |
| 243 | 00000000 | 00000000 | |
| 244 | 00000000 | 00000000 | |
| 245 | 3F19999A | 3F19999A | |
| 246 | 3F4CCCCD | 3F4CCCCD | |
| 247 | **BDA2DEAC** | **BDA037B8** | ğŸ”´ å·®å¼‚ |
| 248 | 00000000 | 00000000 | |
| 249 | 00000000 | 00000000 | |
| 250 | **18B30448** | **18B80448** | ğŸ”´ å·®å¼‚ |
| 251 | **E74CFBB7** | **E747FBB7** | ğŸ”´ å·®å¼‚ |
| 252 | 00000000 | 00000000 | |
| 253 | **18B30454** | **18B80454** | ğŸ”´ å·®å¼‚ |
| 254 | **E74CFBAB** | **E747FBAB** | ğŸ”´ å·®å¼‚ |
| 255 | 00000000 | 00000000 | |
| 256 | **16231F50** | **16231F08** | ğŸ”´ å·®å¼‚ |
| 257 | 00000000 | 00000000 | |
| 258 | 00000000 | 00000000 | |
| 259 | 00000000 | 00000000 | |
| 260 | 00000000 | 00000000 | |
| 261 | 00000000 | 00000000 | |
| 262 | 00000000 | 00000000 | |
| 263 | 00000000 | 00000000 | |
| 264 | 00000000 | 00000000 | |
| 265 | 00000000 | 00000000 | |
| 266 | 00000000 | 00000000 | |
| 267 | 00000000 | 00000000 | |
| 268 | 00000040 | 00000040 | |
| 269 | 00000000 | 00000000 | |
| 270 | 00000000 | 00000000 | |
| 271 | 3F800000 | 3F800000 | |
| 272 | 00000000 | 00000000 | |
| 273 | 00000000 | 00000000 | |
| 274 | 3F000000 | 3F000000 | |
| 275 | 00000001 | 00000001 | |
| 276 | 00000000 | 00000000 | |
| 277 | 00000000 | 00000000 | |
| 278 | **166E87E0** | **162487E0** | ğŸ”´ å·®å¼‚ |
| 279 | **166E87E0** | **162487E0** | ğŸ”´ å·®å¼‚ |
| 280 | 00000000 | 00000000 | |
| 281 | 00000000 | 00000000 | |
| 282 | 00000000 | 00000000 | |
| 283 | 00000020 | 00000020 | |
| 284 | 00000000 | 00000000 | |
| 285 | **00000001** | **00000003** | ğŸ”´ å·®å¼‚ |
| 286 | 00000000 | 00000000 | |
| 287 | 00000000 | 00000000 | |
| 288 | 00000001 | 00000001 | |
| 289 | 00000000 | 00000000 | |
| 290 | **18BA00A8** | **19C100A8** | ğŸ”´ å·®å¼‚ |
| 291 | **18BA00D8** | **19C100C0** | ğŸ”´ å·®å¼‚ |
| 292 | **00000003** | **00000002** | ğŸ”´ å·®å¼‚ |
| 293 | **00000000** | **19C100A8** | ğŸ”´ å·®å¼‚ |
| 294 | **FFFFFFFF** | **00000001** | ğŸ”´ å·®å¼‚ |
| 295 | 00000000 | 00000000 | |
| 296 | 3C570A3D | 3C570A3D | |
| 297 | 3C570A3D | 3C570A3D | |
| 298 | 3C570A3D | 3C570A3D | |
| 299 | 3C570A3D | 3C570A3D | |
| 300 | 00000000 | 00000000 | |
| 301 | 00000000 | 00000000 | |
| 302 | 00000000 | 00000000 | |
| 303 | 00000001 | 00000001 | |
| 304 | 00000010 | 00000010 | |
| 305 | 0000000D | 0000000D | |
| 306 | **162400D8** | **16CD00D8** | ğŸ”´ å·®å¼‚ |
| 307 | 00000000 | 00000000 | |
| 308 | 3CA3D70A | 3CA3D70A | |
| 309 | 00000000 | 00000000 | |
| 310 | **18A80B00** | **18AC0B00** | ğŸ”´ å·®å¼‚ |

---

## 4. ç»“è®ºä¸ä¿®å¤æ–¹æ¡ˆ (Conclusion)

### ç»“è®º
Hook é€»è¾‘ (`FindMyRoom`) æ˜¯åœ¨æ¸¸æˆåˆ—è¡¨åˆ·æ–°å¾ªç¯ä¸­è¢«è§¦å‘çš„ã€‚æ­¤æ—¶ï¼Œæ¸¸æˆç½‘ç»œå¼•æ“çš„çŠ¶æ€æœºæ­£å¤„äº **State 5 (Listing)**ã€‚
å¦‚æœåœ¨ Hook ä¸­ç«‹å³è°ƒç”¨ `JoinGame`ï¼Œå®é™…ä¸Šæ˜¯åœ¨ State 5 çš„çŠ¶æ€ä¸‹è¯·æ±‚è¿›å…¥ State 6 (Connecting)ã€‚æ¸¸æˆå¼•æ“çš„çŠ¶æ€æœºé€»è¾‘ç¦æ­¢è¿™ç§è½¬æ¢ï¼ˆå¿…é¡»å…ˆå›åˆ° State 0 Idleï¼‰ï¼Œä»è€ŒæŠ›å‡ºé”™è¯¯ç  7ã€‚

### ä¿®å¤æ–¹æ¡ˆ
å¿…é¡»ç­‰å¾…ç½‘ç»œå¼•æ“ä» State 5 é€€å‡ºï¼Œå›åˆ° State 0 (Idle) åï¼Œæ‰èƒ½å®‰å…¨è°ƒç”¨ `JoinGame`ã€‚

1.  **Hook ç­–ç•¥**: åœ¨ `FindMyRoom` ä¸­åŒ¹é…æˆåŠŸåï¼Œ**è¿”å› 0**ï¼Œè®©åˆ—è¡¨åˆ·æ–°å¾ªç¯æ­£å¸¸ç»“æŸã€‚
2.  **çŠ¶æ€æ³¨å…¥**: æå‰å°†æˆ¿é—´åå†™å…¥ UI è¾“å…¥æ¡† (`ForceSetJoinGameInputText`)ã€‚
3.  **å¼‚æ­¥æ‰§è¡Œ**: å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œ**Sleep(500~1000ms)**ï¼Œç­‰å¾…ä¸»çº¿ç¨‹å®Œæˆåˆ—è¡¨åˆ·æ–°å¹¶é‡ç½®çŠ¶æ€ã€‚
4.  **å»¶è¿Ÿè°ƒç”¨**: çº¿ç¨‹è‹é†’åï¼Œè°ƒç”¨ `JoinGame(1)`ã€‚æ­¤æ—¶çŠ¶æ€ä¸º 0ï¼ŒåŠ å…¥æˆåŠŸã€‚
5.  **åˆ—è¡¨çŠ¶æ€**: å¯¹äºæˆ¿é—´åˆ—è¡¨é€‰ä¸­çŠ¶æ€æœªæ›´æ–°çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ‰¾åˆ° BattleNetJoinPanel å¯¹è±¡çš„å­å¯¹è±¡[esi+208] -> ListBoxWar3 å¯¹è±¡ï¼Œå†é€šè¿‡ä¿®æ”¹ ListBoxWar3 å¯¹è±¡ [esi+1F4] å’Œ [esi+1F8]ã€‚